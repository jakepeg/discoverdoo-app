{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { createActivity } from '../actions';\nimport Cookies from 'js-cookie';\n\nvar Create = function Create(props) {\n  var router = useRouter();\n  var defaultData = {\n    name: '',\n    description: '',\n    image: '',\n    ageFrom: '',\n    ageTo: '',\n    price: '',\n    website: '',\n    userId: Cookies.get('sub')\n  }; // const formData = defaultData\n\n  var formData = props.initialData ? _objectSpread({}, props.initialData) : defaultData;\n\n  var _useState = useState(formData),\n      form = _useState[0],\n      setForm = _useState[1];\n\n  var _useState2 = useState(false),\n      nameError = _useState2[0],\n      setNameError = _useState2[1];\n\n  var _useState3 = useState(false),\n      descriptionError = _useState3[0],\n      setDescriptionError = _useState3[1];\n\n  var _useState4 = useState(false),\n      imageError = _useState4[0],\n      setImageError = _useState4[1];\n\n  var _useState5 = useState(false),\n      ageFromError = _useState5[0],\n      setAgeFromError = _useState5[1];\n\n  var _useState6 = useState(false),\n      ageToError = _useState6[0],\n      setAgeToError = _useState6[1];\n\n  var _useState7 = useState(false),\n      priceError = _useState7[0],\n      setPriceError = _useState7[1];\n\n  var _useState8 = useState(false),\n      websiteError = _useState8[0],\n      setWebsiteError = _useState8[1];\n\n  var _useState9 = useState(false),\n      categoryError = _useState9[0],\n      setCategoryError = _useState9[1];\n\n  var _useState10 = useState(false),\n      mediumError = _useState10[0],\n      setMediumError = _useState10[1];\n\n  var validate = function validate() {\n    if (!form.name) {\n      setNameError(true);\n      return false;\n    }\n\n    if (!form.ageFrom) {\n      setAgeFromError(true);\n      return false;\n    }\n\n    if (!form.ageTo) {\n      setAgeToError(true);\n      return false;\n    }\n\n    if (!form.price) {\n      setPriceError(true);\n      return false;\n    }\n\n    if (!form.website) {\n      setWebsiteError(true);\n      return false;\n    }\n\n    if (!form.image) {\n      setImageError(true);\n      return false;\n    }\n\n    if (!form.description) {\n      setDescriptionError(true);\n      return false;\n    }\n\n    if (!form.category) {\n      setCategoryError(true);\n      return false;\n    }\n\n    if (!form.medium) {\n      setMediumError(true);\n      return false;\n    }\n\n    return true;\n  };\n\n  var handleChange = function handleChange(event) {\n    var target = event.target;\n    var name = target.name;\n    setForm(_objectSpread(_objectSpread({}, form), {}, _defineProperty({}, name, target.value)));\n  };\n\n  var handleWebsiteChange = function handleWebsiteChange(event) {\n    var target = event.target;\n    var name = target.name;\n    var cleanWebsite = target.value.replace('https://', '').replace('http://', '');\n    console.log(target);\n    setForm(_objectSpread(_objectSpread({}, form), {}, _defineProperty({}, name, cleanWebsite)));\n  };\n\n  var handleCategoryChange = function handleCategoryChange(event) {\n    var options = event.target.options;\n    var optionsLength = options.length;\n    var value = [];\n\n    for (var i = 0; i < optionsLength; i++) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      category: value.toString()\n    }));\n  };\n\n  var handleMediumChange = function handleMediumChange(event) {\n    var options = event.target.options;\n    var optionsLength = options.length;\n    var value = [];\n\n    for (var i = 0; i < optionsLength; i++) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      medium: value.toString()\n    }));\n  };\n\n  var submitForm = function submitForm() {\n    var isValid = validate();\n\n    if (isValid) {\n      createActivity(_objectSpread({}, form)).then(function () {\n        router.push('/my-activities');\n      });\n    }\n  };\n\n  var _useState11 = useState('doozone/tzgl9kjalula4brx0irl.png'),\n      image = _useState11[0],\n      setImage = _useState11[1];\n\n  var _useState12 = useState(false),\n      loading = _useState12[0],\n      setLoading = _useState12[1];\n\n  var uploadImage = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var files, data, res, file, newFileName;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              files = e.target.files;\n              data = new FormData();\n              data.append('file', files[0]);\n              data.append('upload_preset', 'doozone');\n              setLoading(true);\n              _context.next = 7;\n              return fetch('https://api.cloudinary.com/v1_1/jakepeg/image/upload', {\n                method: 'POST',\n                body: data\n              });\n\n            case 7:\n              res = _context.sent;\n              _context.next = 10;\n              return res.json();\n\n            case 10:\n              file = _context.sent;\n              newFileName = file.public_id + '.' + file.format; // console.log(file)\n              // setImage(file.secure_url)\n\n              setImage(newFileName);\n              setLoading(false);\n              setForm(_objectSpread(_objectSpread({}, form), {}, {\n                image: newFileName // image: file.public_id\n\n              }));\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function uploadImage(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"contain top-space\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"details-card\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"card-header\"\n  }, __jsx(\"a\", {\n    href: \"/\",\n    id: \"back-btn\",\n    className: \"jsx-4224210527\"\n  }, __jsx(\"img\", {\n    id: \"arrow-left\",\n    src: \"/arrow-left.svg\",\n    alt: \"Go Back\",\n    className: \"jsx-4224210527\"\n  }), __jsx(\"span\", {\n    className: \"jsx-4224210527\" + \" \" + \"back\"\n  }, \"BACK\"))), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-card-content\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-4224210527\"\n  }, \"Add an activity\"), __jsx(\"form\", {\n    className: \"jsx-4224210527\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"add-activity-form\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-col\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-4224210527\"\n  }, \"Name\"), __jsx(\"input\", {\n    value: form.name,\n    onChange: handleChange,\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    required: true,\n    \"aria-describedby\": \"emailHelp\",\n    placeholder: \"Activity name\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), nameError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter a name\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"ageFrom\",\n    className: \"jsx-4224210527\"\n  }, \"Age from\"), __jsx(\"input\", {\n    onChange: handleChange,\n    value: form.ageFrom,\n    type: \"number\",\n    id: \"ageFrom\",\n    name: \"ageFrom\",\n    required: true,\n    placeholder: \"age from\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), ageFromError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter age from\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"ageTo\",\n    className: \"jsx-4224210527\"\n  }, \"Age to\"), __jsx(\"input\", {\n    onChange: handleChange,\n    value: form.ageTo,\n    type: \"number\",\n    id: \"ageTo\",\n    name: \"ageTo\",\n    required: true,\n    placeholder: \"age to\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), ageToError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter age to\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"price\",\n    className: \"jsx-4224210527\"\n  }, \"Price\"), __jsx(\"input\", {\n    onChange: handleChange,\n    value: form.price,\n    type: \"text\",\n    id: \"price\",\n    name: \"price\",\n    required: true,\n    placeholder: \"Price\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), priceError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter a price\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"website\",\n    className: \"jsx-4224210527\"\n  }, \"Website\"), __jsx(\"input\", {\n    onChange: handleWebsiteChange,\n    value: form.website,\n    type: \"text\",\n    id: \"website\",\n    name: \"website\",\n    required: true,\n    placeholder: \"Website\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), websiteError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter website\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"file\",\n    className: \"jsx-4224210527\"\n  }, \"Image\"), __jsx(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    required: true,\n    placeholder: \"Upload an image\",\n    onChange: uploadImage,\n    className: \"jsx-4224210527\"\n  }), imageError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"provide an image\") : null, __jsx(\"input\", {\n    value: form.userId,\n    type: \"hidden\",\n    id: \"userId\",\n    name: \"userId\",\n    className: \"jsx-4224210527\"\n  })), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, loading ? __jsx(\"h3\", {\n    className: \"jsx-4224210527\"\n  }, \"LOADING IMAGE...\") : __jsx(\"img\", {\n    src: \"https://res.cloudinary.com/jakepeg/image/upload/v1593005651/\".concat(image),\n    style: {\n      width: '150px'\n    },\n    className: \"jsx-4224210527\"\n  }))), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-col\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"description\",\n    className: \"jsx-4224210527\"\n  }, \"Description\"), __jsx(\"textarea\", {\n    onChange: handleChange,\n    value: form.description,\n    id: \"description\",\n    name: \"description\",\n    required: true,\n    rows: \"3\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), descriptionError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter a description\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"category\",\n    className: \"jsx-4224210527\"\n  }, \"Category\"), __jsx(\"select\", {\n    onChange: handleCategoryChange,\n    multiple: true,\n    required: true,\n    id: \"category\",\n    name: \"category\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }, __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Academic\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Arts and crafts\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Cooking\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Games\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Music and dance\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Outdoor\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Sport and fitness\")), categoryError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"select a category\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"medium\",\n    className: \"jsx-4224210527\"\n  }, \"Channel\"), __jsx(\"select\", {\n    onChange: handleMediumChange,\n    multiple: true,\n    required: true,\n    id: \"medium\",\n    name: \"medium\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }, __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Website\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Youtube\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"App\")), mediumError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"select a channel\") : null))), __jsx(\"button\", {\n    onClick: submitForm,\n    type: \"button\",\n    className: \"jsx-4224210527\" + \" \" + \"btn btn-primary\"\n  }, \"Add Activity\"))))), __jsx(_JSXStyle, {\n    id: \"4224210527\"\n  }, [\".form-card-content.jsx-4224210527{padding:20px;}\", \".add-activity-form.jsx-4224210527{margin:50px 50px 0 50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\", \"@media (max-width:1100px){.add-activity-form.jsx-4224210527{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0;}}\", \".form-col.jsx-4224210527{-webkit-flex:1;-ms-flex:1;flex:1;}\", \".form-group.jsx-4224210527{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\", \".form-error.jsx-4224210527{width:60px;color:red;font-size:0.7rem;padding:3px 0 0 3px;}\", \"input.jsx-4224210527:not([type=\\\"submit\\\"]){font-size:1rem;margin-bottom:15px;padding:10px 20px;box-sizing:border-box;width:300px;}\", \"select.jsx-4224210527,textarea.jsx-4224210527{font-size:1rem;margin-bottom:15px;padding:10px 20px;box-sizing:border-box;width:300px;}\", \"h1.jsx-4224210527{margin-top:-35px;}\", \"label.jsx-4224210527{width:120px;}\", \"button.jsx-4224210527{margin:25px 0 25px 50px;}\", \"#description.jsx-4224210527{height:120px;}\", \"#category.jsx-4224210527{height:155px;}\", \"#medium.jsx-4224210527{height:80px;}\"]));\n};\n\nexport default Create;","map":null,"metadata":{},"sourceType":"module"}