{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { createActivity } from '../actions';\nimport Cookies from 'js-cookie';\n\nconst Create = props => {\n  const router = useRouter();\n  const defaultData = {\n    name: '',\n    description: '',\n    image: '',\n    ageFrom: '',\n    ageTo: '',\n    price: '',\n    website: '',\n    userId: Cookies.get('sub')\n  }; // const formData = defaultData\n\n  const formData = props.initialData ? _objectSpread({}, props.initialData) : defaultData;\n  const {\n    0: form,\n    1: setForm\n  } = useState(formData);\n  const {\n    0: nameError,\n    1: setNameError\n  } = useState(false);\n  const {\n    0: descriptionError,\n    1: setDescriptionError\n  } = useState(false);\n  const {\n    0: imageError,\n    1: setImageError\n  } = useState(false);\n  const {\n    0: ageFromError,\n    1: setAgeFromError\n  } = useState(false);\n  const {\n    0: ageToError,\n    1: setAgeToError\n  } = useState(false);\n  const {\n    0: priceError,\n    1: setPriceError\n  } = useState(false);\n  const {\n    0: websiteError,\n    1: setWebsiteError\n  } = useState(false);\n  const {\n    0: categoryError,\n    1: setCategoryError\n  } = useState(false);\n  const {\n    0: mediumError,\n    1: setMediumError\n  } = useState(false);\n\n  const validate = () => {\n    if (!form.name) {\n      setNameError(true);\n      return false;\n    }\n\n    if (!form.ageFrom) {\n      setAgeFromError(true);\n      return false;\n    }\n\n    if (!form.ageTo) {\n      setAgeToError(true);\n      return false;\n    }\n\n    if (!form.price) {\n      setPriceError(true);\n      return false;\n    }\n\n    if (!form.website) {\n      setWebsiteError(true);\n      return false;\n    }\n\n    if (!form.image) {\n      setImageError(true);\n      return false;\n    }\n\n    if (!form.description) {\n      setDescriptionError(true);\n      return false;\n    }\n\n    if (!form.category) {\n      setCategoryError(true);\n      return false;\n    }\n\n    if (!form.medium) {\n      setMediumError(true);\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleChange = event => {\n    const target = event.target;\n    const name = target.name;\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      [name]: target.value\n    }));\n  };\n\n  const handleWebsiteChange = event => {\n    const target = event.target;\n    const name = target.name;\n    const cleanWebsite = target.value.replace('https://', '').replace('http://', '');\n    console.log(target);\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      [name]: cleanWebsite\n    }));\n  };\n\n  const handleCategoryChange = event => {\n    const {\n      options\n    } = event.target;\n    const optionsLength = options.length;\n    let value = [];\n\n    for (let i = 0; i < optionsLength; i++) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      category: value.toString()\n    }));\n  };\n\n  const handleMediumChange = event => {\n    const {\n      options\n    } = event.target;\n    const optionsLength = options.length;\n    let value = [];\n\n    for (let i = 0; i < optionsLength; i++) {\n      if (options[i].selected) {\n        value.push(options[i].value);\n      }\n    }\n\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      medium: value.toString()\n    }));\n  };\n\n  const submitForm = () => {\n    const isValid = validate();\n\n    if (isValid) {\n      createActivity(_objectSpread({}, form)).then(() => {\n        router.push('/my-activities');\n      });\n    }\n  };\n\n  const {\n    0: image,\n    1: setImage\n  } = useState('doozone/tzgl9kjalula4brx0irl.png');\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  const uploadImage = async e => {\n    const files = e.target.files;\n    const data = new FormData();\n    data.append('file', files[0]);\n    data.append('upload_preset', 'doozone');\n    setLoading(true);\n    const res = await fetch('https://api.cloudinary.com/v1_1/jakepeg/image/upload', {\n      method: 'POST',\n      body: data\n    });\n    const file = await res.json();\n    const newFileName = file.public_id + '.' + file.format; // console.log(file)\n    // setImage(file.secure_url)\n\n    setImage(newFileName);\n    setLoading(false);\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      image: newFileName // image: file.public_id\n\n    }));\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"contain top-space\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"details-card\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"card-header\"\n  }, __jsx(\"a\", {\n    href: \"/\",\n    id: \"back-btn\",\n    className: \"jsx-4224210527\"\n  }, __jsx(\"img\", {\n    id: \"arrow-left\",\n    src: \"/arrow-left.svg\",\n    alt: \"Go Back\",\n    className: \"jsx-4224210527\"\n  }), __jsx(\"span\", {\n    className: \"jsx-4224210527\" + \" \" + \"back\"\n  }, \"BACK\"))), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-card-content\"\n  }, __jsx(\"h1\", {\n    className: \"jsx-4224210527\"\n  }, \"Add an activity\"), __jsx(\"form\", {\n    className: \"jsx-4224210527\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"add-activity-form\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-col\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"name\",\n    className: \"jsx-4224210527\"\n  }, \"Name\"), __jsx(\"input\", {\n    value: form.name,\n    onChange: handleChange,\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    required: true,\n    \"aria-describedby\": \"emailHelp\",\n    placeholder: \"Activity name\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), nameError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter a name\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"ageFrom\",\n    className: \"jsx-4224210527\"\n  }, \"Age from\"), __jsx(\"input\", {\n    onChange: handleChange,\n    value: form.ageFrom,\n    type: \"number\",\n    id: \"ageFrom\",\n    name: \"ageFrom\",\n    required: true,\n    placeholder: \"age from\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), ageFromError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter age from\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"ageTo\",\n    className: \"jsx-4224210527\"\n  }, \"Age to\"), __jsx(\"input\", {\n    onChange: handleChange,\n    value: form.ageTo,\n    type: \"number\",\n    id: \"ageTo\",\n    name: \"ageTo\",\n    required: true,\n    placeholder: \"age to\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), ageToError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter age to\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"price\",\n    className: \"jsx-4224210527\"\n  }, \"Price\"), __jsx(\"input\", {\n    onChange: handleChange,\n    value: form.price,\n    type: \"text\",\n    id: \"price\",\n    name: \"price\",\n    required: true,\n    placeholder: \"Price\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), priceError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter a price\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"website\",\n    className: \"jsx-4224210527\"\n  }, \"Website\"), __jsx(\"input\", {\n    onChange: handleWebsiteChange,\n    value: form.website,\n    type: \"text\",\n    id: \"website\",\n    name: \"website\",\n    required: true,\n    placeholder: \"Website\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), websiteError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter website\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"file\",\n    className: \"jsx-4224210527\"\n  }, \"Image\"), __jsx(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    required: true,\n    placeholder: \"Upload an image\",\n    onChange: uploadImage,\n    className: \"jsx-4224210527\"\n  }), imageError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"provide an image\") : null, __jsx(\"input\", {\n    value: form.userId,\n    type: \"hidden\",\n    id: \"userId\",\n    name: \"userId\",\n    className: \"jsx-4224210527\"\n  })), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, loading ? __jsx(\"h3\", {\n    className: \"jsx-4224210527\"\n  }, \"LOADING IMAGE...\") : __jsx(\"img\", {\n    src: `https://res.cloudinary.com/jakepeg/image/upload/v1593005651/${image}`,\n    style: {\n      width: '150px'\n    },\n    className: \"jsx-4224210527\"\n  }))), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-col\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"description\",\n    className: \"jsx-4224210527\"\n  }, \"Description\"), __jsx(\"textarea\", {\n    onChange: handleChange,\n    value: form.description,\n    id: \"description\",\n    name: \"description\",\n    required: true,\n    rows: \"3\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }), descriptionError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"enter a description\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"category\",\n    className: \"jsx-4224210527\"\n  }, \"Category\"), __jsx(\"select\", {\n    onChange: handleCategoryChange,\n    multiple: true,\n    required: true,\n    id: \"category\",\n    name: \"category\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }, __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Academic\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Arty\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Foody\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Gamer\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Performer\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Sporty\")), categoryError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"select a category\") : null), __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-group\"\n  }, __jsx(\"label\", {\n    htmlFor: \"medium\",\n    className: \"jsx-4224210527\"\n  }, \"Channel\"), __jsx(\"select\", {\n    onChange: handleMediumChange,\n    multiple: true,\n    required: true,\n    id: \"medium\",\n    name: \"medium\",\n    className: \"jsx-4224210527\" + \" \" + \"form-control\"\n  }, __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Website\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"Youtube\"), __jsx(\"option\", {\n    className: \"jsx-4224210527\"\n  }, \"App\")), mediumError ? __jsx(\"div\", {\n    className: \"jsx-4224210527\" + \" \" + \"form-error\"\n  }, \"select a channel\") : null))), __jsx(\"button\", {\n    onClick: submitForm,\n    type: \"button\",\n    className: \"jsx-4224210527\" + \" \" + \"btn btn-primary\"\n  }, \"Add Activity\"))))), __jsx(_JSXStyle, {\n    id: \"4224210527\"\n  }, [\".form-card-content.jsx-4224210527{padding:20px;}\", \".add-activity-form.jsx-4224210527{margin:50px 50px 0 50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\", \"@media (max-width:1100px){.add-activity-form.jsx-4224210527{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0;}}\", \".form-col.jsx-4224210527{-webkit-flex:1;-ms-flex:1;flex:1;}\", \".form-group.jsx-4224210527{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\", \".form-error.jsx-4224210527{width:60px;color:red;font-size:0.7rem;padding:3px 0 0 3px;}\", \"input.jsx-4224210527:not([type=\\\"submit\\\"]){font-size:1rem;margin-bottom:15px;padding:10px 20px;box-sizing:border-box;width:300px;}\", \"select.jsx-4224210527,textarea.jsx-4224210527{font-size:1rem;margin-bottom:15px;padding:10px 20px;box-sizing:border-box;width:300px;}\", \"h1.jsx-4224210527{margin-top:-35px;}\", \"label.jsx-4224210527{width:120px;}\", \"button.jsx-4224210527{margin:25px 0 25px 50px;}\", \"#description.jsx-4224210527{height:120px;}\", \"#category.jsx-4224210527{height:155px;}\", \"#medium.jsx-4224210527{height:80px;}\"]));\n};\n\nexport default Create;","map":null,"metadata":{},"sourceType":"module"}